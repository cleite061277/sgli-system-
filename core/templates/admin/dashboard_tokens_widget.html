<div style="margin: 20px 0;">
    <!-- Estatísticas Gerais -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
        
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="font-size: 32px; font-weight: bold;">{{ estatisticas.total }}</div>
            <div style="opacity: 0.9;">Total de Tokens</div>
        </div>
        
        <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="font-size: 32px; font-weight: bold;">{{ estatisticas.ativos }}</div>
            <div style="opacity: 0.9;">Tokens Ativos</div>
        </div>
        
        <div style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="font-size: 32px; font-weight: bold;">{{ tokens_expirando.total }}</div>
            <div style="opacity: 0.9;">Expirando (7 dias)</div>
        </div>
        
        <div style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <div style="font-size: 32px; font-weight: bold;">{{ estatisticas.expirados }}</div>
            <div style="opacity: 0.9;">Tokens Expirados</div>
        </div>
    </div>
    
    <!-- Alertas -->
    {% if tokens_expirando.total > 0 %}
    <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <h3 style="margin: 0 0 10px 0; color: #92400e;">⚠️ Tokens Expirando em 7 Dias</h3>
        <ul style="margin: 0; padding-left: 20px;">
            {% for comanda in tokens_expirando.comandas %}
            <li>
                <strong>Comanda {{ comanda.numero_comanda }}</strong> - 
                {{ comanda.locacao.locatario.nome_razao_social }}
                <a href="/admin/core/comanda/{{ comanda.id }}/change/" style="margin-left: 10px;">Editar</a>
            </li>
            {% endfor %}
            {% for pagamento in tokens_expirando.pagamentos %}
            <li>
                <strong>Recibo {{ pagamento.numero_pagamento }}</strong> - 
                {{ pagamento.comanda.locacao.locatario.nome_razao_social }}
                <a href="/admin/core/pagamento/{{ pagamento.id }}/change/" style="margin-left: 10px;">Editar</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if tokens_expirados.total > 0 %}
    <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 15px; border-radius: 8px;">
        <h3 style="margin: 0 0 10px 0; color: #991b1b;">❌ Tokens Expirados (Últimos 10)</h3>
        <p style="margin: 0 0 10px 0; color: #666; font-size: 14px;">
            Estes links não funcionam mais. Use a action "Renovar tokens" para gerar novos links.
        </p>
        <ul style="margin: 0; padding-left: 20px;">
            {% for comanda in tokens_expirados.comandas|slice:":10" %}
            <li>
                <strong>Comanda {{ comanda.numero_comanda }}</strong> - 
                Expirou em {{ comanda.token_expira_em|date:"d/m/Y" }}
                <a href="/admin/core/comanda/{{ comanda.id }}/change/" style="margin-left: 10px;">Editar</a>
            </li>
            {% endfor %}
            {% for pagamento in tokens_expirados.pagamentos|slice:":10" %}
            <li>
                <strong>Recibo {{ pagamento.numero_pagamento }}</strong> - 
                Expirou em {{ pagamento.token_expira_em|date:"d/m/Y" }}
                <a href="/admin/core/pagamento/{{ pagamento.id }}/change/" style="margin-left: 10px;">Editar</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
